{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container-fluid py-4 page-wrapper">
    <div class="row">

        <!-- SIDEBAR -->
        <div class="col-lg-3 d-none d-lg-block">
            <div class="card shadow border-0 h-100 glass-card sidebar-card">
                <div class="gradient-header text-white p-4 text-center rounded-top">
                    <i class="fas fa-university fa-3x mb-2 text-white-50"></i>
                    <h5 class="fw-bold mb-0">{{ user.username }}</h5>
                    <p class="small opacity-75 mb-0">College Administrator</p>
                </div>
                <div class="p-3">
                    <ul class="nav flex-column nav-pills">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'college_dashboard' %}">
                                <i class="fas fa-home me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'register_student' %}">
                                <i class="fas fa-user-plus me-2"></i>Register Students
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="{% url 'team_creation' %}">
                                <i class="fas fa-users me-2"></i>Create Teams
                            </a>
                        </li>
                    </ul>
                    <hr>
                    <a class="nav-link text-danger" href="{% url 'logout' %}">
                        <i class="fas fa-sign-out-alt me-2"></i>Logout
                    </a>
                </div>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="col-lg-9">

            <!-- PAGE HEADER -->
            <div class="main-header p-4 mb-3 shadow-sm bg-white rounded d-flex justify-content-between align-items-center glass-card">
                <div>
                    <h4 class="mb-1 fw-bold">
                        <i class="fas fa-users me-2 text-primary"></i>Create Your Team
                    </h4>
                    <p class="mb-0 text-muted small">
                        Select category â†’ event â†’ participants <br>
                    </p>
                </div>
                <div class="d-flex gap-2 align-items-center">
                    <!-- Dark mode toggle -->
                    <button id="theme-toggle" type="button" class="btn btn-sm btn-outline-secondary">
                        ðŸŒ™ Dark Mode
                    </button>
                    <a href="{% url 'register_student' %}" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-user-plus me-2"></i>Register Students
                    </a>
                </div>
            </div>

        

            <!-- CATEGORY LIMIT SUMMARY -->
            {% if category_limits %}
            <div class="card shadow border-0 mb-4 glass-card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span class="fw-semibold">
                        <i class="fas fa-chart-pie me-2"></i>Category Usage Overview
                    </span>
                    <span class="small text-muted">Per-college team limits</span>
                </div>
                <div class="card-body py-3">
                    <div class="row g-3">
                        {% for c in category_limits %}
                        <div class="col-md-6 col-xl-4">
                            <div class="category-pill p-3 h-100">
                                <div class="d-flex justify-content-between align-items-center mb-1">
                                    <span class="fw-semibold text-capitalize">{{ c.label }}</span>
                                    <span class="badge bg-light text-dark">
                                        {{ c.used }}/{{ c.limit }}
                                    </span>
                                </div>
                                <div class="progress soft-progress mb-1" style="height: 6px;">
                                    <div class="progress-bar"
                                        role="progressbar"
                                        style="width: {{ c.percent|floatformat:0 }}%;"></div>
                                </div>
                                <small class="text-muted">
                                    {% if c.remaining > 0 %}
                                        {{ c.remaining }} team{{ c.remaining|pluralize }} remaining
                                    {% else %}
                                        <span class="text-danger">Limit reached</span>
                                    {% endif %}
                                </small>

                            </div>
                        </div>
                        {% endfor %}
                        <!-- Natakam info -->
                        <div class="col-md-6 col-xl-4">
                            <div class="category-pill p-3 h-100 border-start border-3 border-warning">
                                <div class="d-flex justify-content-between align-items-center mb-1">
                                    <span class="fw-semibold text-warning">
                                        Natakam Limit
                                    </span>
                                    <span class="badge bg-warning text-dark">
                                        {{ natakam_count }}/{{ max_natakam }}
                                    </span>
                                </div>
                                <small class="text-muted d-block">
                                    Across:
                                    {% for n in NATAKAM_ITEMS %}
                                        <span class="badge bg-light text-dark me-1 mb-1">{{ n }}</span>
                                    {% endfor %}
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- TEAM CREATION CARD -->
            <div class="card shadow border-0 mb-4 glass-card">
                <div class="card-header bg-primary text-white fw-bold d-flex justify-content-between align-items-center">
                    <span>
                        <i class="fas fa-edit me-2"></i>Team Formation
                    </span>
                    <span class="badge bg-light text-primary">
                        Step 1 of 2
                    </span>
                </div>
                <div class="card-body p-4">

                    <form method="POST" id="teamForm" autocomplete="off">
                        {% csrf_token %}

                        <!-- CATEGORY -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Select Category *</label>
                            <select id="category-select" class="form-select fancy-select" required>
                                <option value="">-- Select Category --</option>
                                {% for c in categories %}
                                    <option value="{{ c }}">{{ c }}</option>
                                {% endfor %}
                            </select>
                            <div class="form-text text-muted">Filtered event list will appear after selecting category.</div>
                        </div>

                        <!-- EVENT ITEM -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Select Event Item *</label>
                            <select id="item-select" name="item" class="form-select fancy-select" required disabled>
                                <option value="">-- Select Category First --</option>
                                {% for item in items %}
                                    <option value="{{ item.id }}"
                                            data-cat="{{ item.category }}"
                                            data-max="{{ item.max_participants }}">
                                        {{ item.name }}
                                    </option>
                                {% endfor %}
                            </select>
                            <div id="item-info" class="mt-2 small"></div>
                        </div>

                        <!-- STUDENT SEARCH -->
                        <div class="mb-2 d-flex justify-content-between align-items-center flex-wrap gap-2">
                            <label class="form-label fw-semibold mb-0">Select Participants</label>
                            <input type="text" id="student-search" class="form-control form-control-sm"
                                   style="max-width: 260px;" placeholder="Search by name or department">
                        </div>

                        <!-- SELECTION COUNTER -->
                        <div id="selection-counter" class="alert alert-secondary mb-3 soft-alert">
                            <i class="fas fa-info-circle me-2"></i>
                            No students selected
                        </div>

                        <!-- STUDENT LIST -->
                        <div class="student-list p-3">
                            <div class="row" id="student-list-wrapper">
                                {% for s in students %}
                                <div class="col-md-6 mb-2 student-wrapper">
                                    <label class="form-check student-card p-2 rounded w-100"
                                           data-name="{{ s.name|lower }} {{ s.department|lower }}">
                                        <input class="form-check-input student-checkbox" type="checkbox"
                                               name="students" value="{{ s.id }}">
                                        <span>
                                            <strong>{{ s.name }}</strong><br>
                                            <small class="text-muted">
                                                {{ s.department }} â€¢ Year {{ s.current_year }}
                                            </small>
                                        </span>
                                    </label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                        <button type="submit" id="submitBtn" class="btn btn-primary w-100 mt-4">
                            <i class="fas fa-check-circle me-2"></i>Create Team
                        </button>
                    </form>
                </div>
            </div>

            <!-- TEAM LIST CARD -->
            <div class="card shadow border-0 glass-card">
                <div class="card-header bg-success text-white fw-bold d-flex justify-content-between align-items-center">
                    <span><i class="fas fa-list me-2"></i>Your Created Teams</span>
                    <span class="small opacity-75">
                        Total: {{ teams|length }}
                    </span>
                </div>
                <div class="card-body p-0">
                    {% if teams %}
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0 pretty-table">
                            <thead class="table-light">
                                <tr>
                                    <th>Item</th>
                                    <th>Category</th>
                                    <th>Participants</th>
                                    <th class="text-end">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for t in teams %}
                                <tr>
                                    <td>
                                        <span class="fw-semibold">{{ t.item.name }}</span><br>
                                        <small class="text-muted">{{ t.item.item_type|capfirst }}</small>
                                    </td>
                                    <td>{{ t.category }}</td>
                                    <td>{{ t.students.count }}</td>
                                    <td class="text-end pe-3">
                                        <button class="btn btn-sm btn-outline-primary"
                                                data-bs-toggle="modal"
                                                data-bs-target="#editTeamModal{{ t.id }}">
                                            <i class="fas fa-pencil-alt me-1"></i>Edit Team
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                        <p class="text-muted text-center py-4 mb-0">
                            No teams created yet. Create your first team above.
                        </p>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
</div>

<!-- EDIT TEAM MODALS -->
{% if teams %}
    {% for t in teams %}
    <div class="modal fade edit-team-modal" id="editTeamModal{{ t.id }}" tabindex="-1" aria-hidden="true"
         data-max="{{ t.item.max_participants }}">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content glass-modal">
                <form method="POST" action="{% url 'edit_team' t.id %}">
                    {% csrf_token %}
                    <div class="modal-header">
                        <h5 class="modal-title">
                            Edit Team â€“ {{ t.item.name }} (Max: {{ t.item.max_participants }})
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">

                        <p class="small text-muted mb-2">
                            Category: <strong>{{ t.category }}</strong> â€¢
                            Type: <strong>{{ t.item.item_type|capfirst }}</strong>
                        </p>

                        <div class="alert alert-secondary modal-counter mb-3 soft-alert">
                            <i class="fas fa-info-circle me-2"></i>
                            <span class="modal-selection-info">Updatingâ€¦</span>
                        </div>

                        <div class="row">
                            {% for s in students %}
                            <div class="col-md-6 mb-2">
                                <label class="form-check student-card p-2 rounded w-100">
                                    <input class="form-check-input modal-student-checkbox"
                                           type="checkbox"
                                           name="edit_students"
                                           value="{{ s.id }}"
                                           {% if s in t.students.all %}checked{% endif %}>
                                    <span>
                                        <strong>{{ s.name }}</strong><br>
                                        <small class="text-muted">
                                            {{ s.department }} â€¢ Year {{ s.current_year }}
                                        </small>
                                    </span>
                                </label>
                            </div>
                            {% endfor %}
                        </div>

                    </div>
                    <div class="modal-footer d-flex justify-content-between">

                        <!-- DELETE BTN -->
                        <button type="button"
                                class="btn btn-outline-danger"
                                onclick="confirmDeleteTeam('{{ t.id }}')">
                            <i class="fas fa-trash-alt me-1"></i> Delete Team
                        </button>

                        <div>
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                Close
                            </button>
                            <button type="submit" class="btn btn-primary modal-save-btn">
                                Save Changes
                            </button>
                        </div>

                    </div>

                </form>
            </div>
        </div>
    </div>
    {% endfor %}
{% endif %}

{% endblock %}

{% block extra_js %}
<script>
// ----- existing teams (for quick warning when selecting an item) -----
const existingTeams = new Set(
    JSON.parse(`[{% for id in existing_item_ids %}{{ id }}{% if not forloop.last %},{% endif %}{% endfor %}]`)
);

function confirmDeleteTeam(teamId) {
    if (confirm("Are you sure you want to delete this team? This action cannot be undone.")) {
        window.location.href = `/team/delete/${teamId}/`;
    }
}

document.addEventListener("DOMContentLoaded", function () {
    const categorySelect    = document.getElementById("category-select");
    const itemSelect        = document.getElementById("item-select");
    const itemInfo          = document.getElementById("item-info");
    const searchInput       = document.getElementById("student-search");
    const selectionCounter  = document.getElementById("selection-counter");
    const submitBtn         = document.getElementById("submitBtn");
    const teamForm          = document.getElementById("teamForm");
    const themeToggle       = document.getElementById("theme-toggle");

    // ---------- DARK MODE ----------
    function applyTheme(theme) {
        const body = document.body;
        if (theme === "dark") {
            body.classList.add("dark-mode");
            if (themeToggle) themeToggle.innerHTML = "â˜€ Light Mode";
        } else {
            body.classList.remove("dark-mode");
            if (themeToggle) themeToggle.innerHTML = "ðŸŒ™ Dark Mode";
        }
    }

    const savedTheme = localStorage.getItem("theme") || "light";
    applyTheme(savedTheme);

    if (themeToggle) {
        themeToggle.addEventListener("click", () => {
            const current = document.body.classList.contains("dark-mode") ? "dark" : "light";
            const next = current === "dark" ? "light" : "dark";
            localStorage.setItem("theme", next);
            applyTheme(next);
        });
    }
    // -------------------------------

    // ---- CATEGORY FILTER ----
    categorySelect.addEventListener("change", function () {
        const cat = this.value;
        itemSelect.disabled = (cat === "");
        itemSelect.value = "";
        itemInfo.innerHTML = "";
        updateCounter();

        const options = itemSelect.querySelectorAll("option");
        options.forEach(opt => {
            if (!opt.value) return; // skip placeholder
            opt.style.display = (opt.dataset.cat === cat) ? "block" : "none";
        });
    });

    // ---- ITEM CHANGE (MAX + ALREADY TEAM) ----
    itemSelect.addEventListener("change", function () {
        const selectedOpt = this.options[this.selectedIndex];
        if (!selectedOpt || !selectedOpt.value) {
            itemInfo.innerHTML = "";
            updateCounter();
            return;
        }

        const max = selectedOpt.dataset.max;
        const itemId = parseInt(selectedOpt.value);
        let warnHtml = "";

        if (existingTeams.has(itemId)) {
            warnHtml = `
                <div class="alert alert-warning mb-2 soft-alert">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    You already have a team for this item. You can edit it in the "Your Created Teams" section below.
                </div>
            `;
        }

        itemInfo.innerHTML = `
            ${warnHtml}
            <div class="alert alert-info mb-0 soft-alert">
                <i class="fas fa-users me-2"></i>
                Maximum participants allowed: <strong>${max}</strong>
            </div>
        `;
        updateCounter();
    });

    // ---- SEARCH AS YOU TYPE ----
    if (searchInput) {
        searchInput.addEventListener("input", function () {
            const q = this.value.toLowerCase().trim();
            document.querySelectorAll(".student-wrapper").forEach(wrapper => {
                const nameData = wrapper.querySelector(".student-card").dataset.name;
                if (!q || nameData.includes(q)) {
                    wrapper.style.display = "";
                } else {
                    wrapper.style.display = "none";
                }
            });
        });
    }

    // ---- SELECTION COUNTER FOR CREATE FORM ----
    function updateCounter() {
        const selected = document.querySelectorAll(".student-checkbox:checked").length;
        const selectedOpt = itemSelect.options[itemSelect.selectedIndex];
        const max = selectedOpt && selectedOpt.dataset.max ? parseInt(selectedOpt.dataset.max) : 0;

        if (!max) {
            selectionCounter.className = "alert alert-secondary mb-3 soft-alert";
            selectionCounter.innerHTML = `
                <i class="fas fa-info-circle me-2"></i>
                Select a category and event item first
            `;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-exclamation-circle me-2"></i>Select Item First';
            return;
        }

        selectionCounter.innerHTML = `
            <i class="fas fa-users me-2"></i>
            Selected: <strong>${selected}</strong> / ${max}
        `;
        if (selected === 0) {
            selectionCounter.className = "alert alert-secondary mb-3 soft-alert";
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-user-slash me-2"></i>Select Students';
        } else if (selected > max) {
            selectionCounter.className = "alert alert-danger mb-3 soft-alert";
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-exclamation-circle me-2"></i>Too Many Students';
        } else if (selected === max) {
            selectionCounter.className = "alert alert-success mb-3 soft-alert";
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-check-circle me-2"></i>Create Team';
        } else {
            selectionCounter.className = "alert alert-primary mb-3 soft-alert";
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-check-circle me-2"></i>Create Team';
        }
    }

    document.querySelectorAll(".student-checkbox").forEach(cb =>
        cb.addEventListener("change", updateCounter)
    );
    updateCounter();

    // ---- FORM SUBMIT VALIDATION (BACKUP) ----
    teamForm.addEventListener("submit", function (e) {
        const itemValue = itemSelect.value;
        const selected = document.querySelectorAll(".student-checkbox:checked").length;
        const selectedOpt = itemSelect.options[itemSelect.selectedIndex];
        const max = selectedOpt && selectedOpt.dataset.max ? parseInt(selectedOpt.dataset.max) : 0;

        if (!itemValue) {
            e.preventDefault();
            alert("Please select an event item.");
            itemSelect.focus();
            return false;
        }
        if (selected === 0) {
            e.preventDefault();
            alert("Please select at least one student.");
            return false;
        }
        if (max && selected > max) {
            e.preventDefault();
            alert(`You can select at most ${max} students for this item.`);
            return false;
        }
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Creating Team...';
    });

    // ---- EDIT TEAM MODALS ----
    document.querySelectorAll(".edit-team-modal").forEach(modal => {
        const max = parseInt(modal.dataset.max || "0");
        const checkboxes = modal.querySelectorAll(".modal-student-checkbox");
        const counterBox = modal.querySelector(".modal-counter");
        const infoSpan = modal.querySelector(".modal-selection-info");
        const saveBtn = modal.querySelector(".modal-save-btn");

        function updateModalCounter() {
            const selected = modal.querySelectorAll(".modal-student-checkbox:checked").length;

            infoSpan.textContent = `Selected ${selected} / ${max}`;
            if (selected === 0) {
                counterBox.className = "alert alert-secondary modal-counter mb-3 soft-alert";
                saveBtn.disabled = true;
            } else if (selected > max) {
                counterBox.className = "alert alert-danger modal-counter mb-3 soft-alert";
                saveBtn.disabled = true;
            } else if (selected === max) {
                counterBox.className = "alert alert-success modal-counter mb-3 soft-alert";
                saveBtn.disabled = false;
            } else {
                counterBox.className = "alert alert-primary modal-counter mb-3 soft-alert";
                saveBtn.disabled = false;
            }
        }

        checkboxes.forEach(cb => cb.addEventListener("change", updateModalCounter));
        updateModalCounter();
    });
});
</script>

<style>
/* ---- Modern + Dark Mode Styles (you can move this into static/css later) ---- */

.page-wrapper {
    transition: background-color 0.3s ease, color 0.3s ease;
}

.glass-card {
    border-radius: 16px;
    backdrop-filter: blur(8px);
    background: rgba(255, 255, 255, 0.9);
    transition: background 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
}

.glass-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 30px rgba(15, 23, 42, 0.15);
}

.glass-modal {
    border-radius: 16px;
    backdrop-filter: blur(10px);
}

/* header */
.main-header {
    border-left: 4px solid #0d6efd;
}

/* student list */
.student-card {
    border: 1px solid #e5e7eb;
    cursor: pointer;
    transition: 0.2s;
    background-color: rgba(248, 250, 252, 0.8);
}

.student-card:hover {
    background: #f5f8ff;
    border-color: #a9c9ff;
}

.student-list {
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    max-height: 380px;
    overflow-y: auto;
    background: #fbfbfb;
}

.student-card input:checked + span {
    color: #0d6efd;
    font-weight: 600;
}

.soft-alert {
    border-radius: 10px;
}

/* category pills */
.category-pill {
    border-radius: 12px;
    background: linear-gradient(135deg, #f9fafb 0%, #eef2ff 100%);
    border: 1px solid #e5e7eb;
}

.soft-progress .progress-bar {
    background: linear-gradient(90deg, #0d6efd, #4f46e5);
}

/* table */
.pretty-table tbody tr:hover {
    background-color: rgba(13, 110, 253, 0.04);
}

/* ---- DARK MODE ---- */
body.dark-mode {
    background-color: #050816;
    color: #e5e7eb;
}

body.dark-mode .page-wrapper {
    background: radial-gradient(circle at 0 0, #1f2937 0, transparent 40%),
                radial-gradient(circle at 100% 0, #111827 0, transparent 40%);
}

body.dark-mode .glass-card,
body.dark-mode .card,
body.dark-mode .modal-content {
    background: rgba(15, 23, 42, 0.92) !important;
    color: #e5e7eb;
    border-color: rgba(55, 65, 81, 0.8) !important;
}

body.dark-mode .sidebar-card {
    background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.16), transparent 55%),
                radial-gradient(circle at bottom right, rgba(168, 85, 247, 0.16), transparent 55%),
                rgba(15, 23, 42, 0.95);
}

body.dark-mode .main-header {
    border-left-color: #38bdf8;
}

body.dark-mode .table,
body.dark-mode .table th,
body.dark-mode .table td {
    color: #e5e7eb;
    background-color: transparent;
}

body.dark-mode .table-light {
    background-color: rgba(31, 41, 55, 0.85) !important;
}

body.dark-mode .student-card {
    background-color: rgba(15, 23, 42, 0.9);
    border-color: rgba(55, 65, 81, 0.9);
}

body.dark-mode .student-card:hover {
    background-color: rgba(30, 64, 175, 0.35);
    border-color: #4f46e5;
}

body.dark-mode .student-list {
    background: rgba(15, 23, 42, 0.9);
    border-color: rgba(55, 65, 81, 0.9);
}

body.dark-mode .alert {
    background-color: rgba(31, 41, 55, 0.9);
    border-color: rgba(75, 85, 99, 0.9);
    color: #e5e7eb;
}

body.dark-mode .alert-info {
    background-color: rgba(37, 99, 235, 0.12);
    border-color: rgba(59, 130, 246, 0.7);
}

body.dark-mode .alert-warning {
    background-color: rgba(202, 138, 4, 0.12);
    border-color: rgba(234, 179, 8, 0.7);
}

body.dark-mode .alert-success {
    background-color: rgba(22, 163, 74, 0.12);
    border-color: rgba(34, 197, 94, 0.7);
}

body.dark-mode .alert-danger {
    background-color: rgba(185, 28, 28, 0.12);
    border-color: rgba(248, 113, 113, 0.7);
}

body.dark-mode .category-pill {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(15, 23, 42, 0.9) 100%);
    border-color: rgba(55, 65, 81, 0.9);
}

body.dark-mode .progress {
    background-color: rgba(31, 41, 55, 0.9);
}

body.dark-mode .progress-bar {
    background: linear-gradient(90deg, #38bdf8, #a855f7);
}

body.dark-mode .form-control,
body.dark-mode .form-select {
    background-color: rgba(15, 23, 42, 0.9);
    color: #e5e7eb;
    border-color: rgba(55, 65, 81, 0.9);
}

body.dark-mode .form-control:focus,
body.dark-mode .form-select:focus {
    background-color: rgba(15, 23, 42, 0.95);
    color: #e5e7eb;
    border-color: #38bdf8;
    box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.7);
}

body.dark-mode .nav-link {
    color: #cbd5f5;
}

body.dark-mode .nav-link.active,
body.dark-mode .nav-link:hover {
    background-color: rgba(37, 99, 235, 0.3);
    color: #fff;
}

body.dark-mode .btn-outline-secondary {
    color: #e5e7eb;
    border-color: rgba(75, 85, 99, 0.9);
}

body.dark-mode .btn-outline-secondary:hover {
    background-color: rgba(75, 85, 99, 0.9);
}

body.dark-mode .btn-outline-primary {
    color: #bfdbfe;
    border-color: #60a5fa;
}

body.dark-mode .btn-outline-primary:hover {
    background-color: #2563eb;
    border-color: #2563eb;
}

body.dark-mode .btn-primary {
    background: linear-gradient(90deg, #2563eb, #7c3aed);
    border-color: transparent;
}
</style>
{% endblock %}
